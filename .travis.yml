sudo: false              # Use the container-based infrastructure.

addons:
  apt:
    packages:
      - libgmp-dev       # Stack's GHC depends on this.

cache:
  directories:
    - $HOME/.stack       # Global stack's cache.
    - $HOME/.foldercache # Per exercise `.stack-work` cache.

env:
 - RESOLVER="lts-7.16" CURRENT="YES" # Equal to each stack.yaml.
 - RESOLVER="nightly"                # Latest nightly snapshot.

matrix:
  allow_failures:             # The snapshot `nightly` is just an alias to
    - env: RESOLVER="nightly" # the newest version released. We don't want
  fast_finish: true           # Travis to fail on new incompatible releases.

before_install:
 - mkdir -p ${HOME}/bin                        # Create folder for stack.
 - export PATH="${HOME}/bin:$PATH"             # For stack
 - export PATH="${TRAVIS_BUILD_DIR}/bin:$PATH" # For {,fetch-}configlet.

install:
 - travis_retry fetch-configlet

script:
 - true
